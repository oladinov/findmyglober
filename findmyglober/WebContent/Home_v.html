<html>
<head>
<link rel="stylesheet" type="text/css" href="styles.css">
<script src="js/map.js"></script>
<title>Find my Glober - Globant</title>
<script src="prefixfree-1.0.7.js" type="text/javascript"></script>

<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.12.0.min.js"></script>
</head>
<body>

<ul class="nav">
    <li id="settings">
        <a href="#"><img src="search_icon_small.png" /></a>
    </li>
    <li id="options">
        <a href="#">Ver</a>
        <ul class="subnav">
            <li><a href="#" id="glober">Glober</a></li>
            <li><a href="#" id="proy">Proyecto</a></li>
            <li><a href="#" id="email">Email</a></li>
        </ul>
    </li>
    <li id="search">
        <form action="localhost:8080/findmyglober/glober" method="post">
            <input type="hidden" name="searchType" id="searchType" />
            <input type="text" name="search_text" id="search_text" placeholder="Buscar..."/>
            <input type="button" name="search_button" id="search_button"></input>
        </form>
    </li>
    
</ul>

<img id="site" src="site.png"></img>

<div id="showData">


</div>

<script>
$('#glober').click(function (){
    $('#searchType').val('getByName');
});

$('#proy').click(function (){
    $('#searchType').val('getByProject');
});

$('#email').click(function (){
    $('#searchType').val('getByEmail');
});

$('#search_button').click(function (){
    
    $.ajax({ 
        type: "GET",
        dataType: "json",
        url: "/findmyglober/glober/" +  $('#searchType').val() + "/" + $('#search_text').val(),
        success: function(data){
            $('#site').hide();
            var tabla = "<table>";
            for(var i = 0; data[i] != null; i++){
                tabla += "<tr onclick='globerDetails("+ data[i].globerId + ");'><td>" + data[i].firstname +"</td>"
                    +"<td>" +data[i].firstname + "</td>"
                    +"<td>" +data[i].secondName + "</td>"
                    +"<td>" + data[i].middleName+ "</td>"
                    +"<td>" + data[i].lastName+ "</td>"
                    +"<td>" + data[i].mail+ "</td>"
                    +"<td>" + data[i].projectName+ "</td></tr>"
            }
            tabla) + "</table>";
        }, 
        error: function() {
            alert("Hubo un error al obtener los datos del glober");
        }
    });
    
});

function globerDetails(globerid) {
    document.location("ViewProfile.html?glober=" + globerid);
}

</script>
</body>
</html>